# üß≠ XPath Cheatsheet ‚Äì –ë—ã—Å—Ç—Ä—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ XPath

## üìå –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- XPath ‚Äî —è–∑—ã–∫ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º XML/HTML-–¥–æ–∫—É–º–µ–Ω—Ç–∞.
- XPath –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ **Xpath test bed (whitebeam.org)** –∏–ª–∏ –≤ **–∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞**:
  ```javascript
  $x("//div") // –†–∞–±–æ—Ç–∞–µ—Ç –≤ Chrome –∏ Firefox
  ```

---

## üìÅ –°–µ–ª–µ–∫—Ç–æ—Ä—ã –∏ –±–∞–∑–æ–≤—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

### üîπ –ü—Ä–æ—Å—Ç—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
```xpath
//h1                  # –í—Å–µ h1
//div//p              # –í—Å–µ p –≤–Ω—É—Ç—Ä–∏ div (–Ω–∞ –ª—é–±–æ–π –≥–ª—É–±–∏–Ω–µ)
//ul/li               # li ‚Äî –ø—Ä—è–º—ã–µ –ø–æ—Ç–æ–º–∫–∏ ul
/div/*               # –í—Å–µ –ø—Ä—è–º—ã–µ –¥–æ—á–µ—Ä–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã div
/                    # –ö–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç (–æ–±—ã—á–Ω–æ html)
/body                # –ö–æ—Ä–Ω–µ–≤–æ–π body
```

### üîπ –ê—Ç—Ä–∏–±—É—Ç—ã
```xpath
//*[@id="id"]                             # –≠–ª–µ–º–µ–Ω—Ç —Å id="id"
//*[@class="class"]                       # –¢–æ—á–Ω—ã–π –∫–ª–∞—Å—Å (—Ä–µ–¥–∫–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
//input[@type="submit"]                   # input —Å type="submit"
//a[@id="abc"][@for="xyz"]                # –ù–µ—Å–∫–æ–ª—å–∫–æ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
//a[@rel]                                 # –≠–ª–µ–º–µ–Ω—Ç, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å rel
//a[starts-with(@href, '/')]              # href –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å '/'
//a[ends-with(@href, '.pdf')]             # href –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ '.pdf'
//a[contains(@href, '://')]               # href —Å–æ–¥–µ—Ä–∂–∏—Ç '://'
//a[contains(@rel, 'help')]               # rel —Å–æ–¥–µ—Ä–∂–∏—Ç help (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ)
```

### üîπ –ö–ª–∞—Å—Å —á–µ—Ä–µ–∑ `contains + normalize-space`
```xpath
//div[contains(concat(' ', normalize-space(@class), ' '), ' my-class ')]
```

---

## üî¢ –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

### üîπ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
```xpath
//li[1]                    # –ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
//li[last()]               # –ü–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç
//li[position()=2]         # –í—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç
//li[position()>1]         # –í—Å–µ, –Ω–∞—á–∏–Ω–∞—è —Å–æ –≤—Ç–æ—Ä–æ–≥–æ
//li[position() mod 2 = 1] # –ù–µ—á—ë—Ç–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
```

### üîπ –°–æ–≤–º–µ—â–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π
```xpath
//ul/li[position() <= 3 and @class="item"]
//div[position() = last() - 1]    # –ü—Ä–µ–¥–ø–æ—Å–ª–µ–¥–Ω–∏–π
```

---

## üß† –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

### üîπ –£—Å–ª–æ–≤–∏—è
```xpath
//a[@name or @href]
//div[@id="head" and position()=2]
//div[(x and y) or not(z)]
```

---

## üîç –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É

### üîπ –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
```xpath
//button[text()="Submit"]
//*[normalize-space(text())="Submit"]
```

### üîπ –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
```xpath
//button[contains(text(),"Go")]
```

### üîπ –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É `.` –∏ `text()`
```xpath
//div[.="Hello"]                 # –í–µ—Å—å —Ç–µ–∫—Å—Ç —É–∑–ª–∞
//span/text()                    # –¢–µ–∫—Å—Ç–æ–≤—ã–π —É–∑–µ–ª (Node)
```

---

## üå≤ –û—Å–∏ (axes)

### üîπ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –æ—Å–∏
```xpath
//div/child::span                 # –ü—Ä—è–º–æ–π –ø–æ—Ç–æ–º–æ–∫ span
//div/descendant::span           # –í—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ span
//div/ancestor::section          # –ü—Ä–µ–¥–∫–∏ —Ç–∏–ø–∞ section
//div/ancestor-or-self::section  # –ü—Ä–µ–¥–æ–∫ section –∏–ª–∏ —Å–∞–º div
//div/parent::body               # –†–æ–¥–∏—Ç–µ–ª—å body
//div/following-sibling::p       # –ë—Ä–∞—Ç—å—è —Å–ø—Ä–∞–≤–∞
//div/preceding-sibling::p       # –ë—Ä–∞—Ç—å—è —Å–ª–µ–≤–∞
//div/following::span            # –í—Å–µ span –¥–∞–ª—å—à–µ –ø–æ DOM
//div/preceding::span            # –í—Å–µ span –ø–µ—Ä–µ–¥ div
//self::div                      # –°–∞–º —ç–ª–µ–º–µ–Ω—Ç
//attribute::id                  # –ê—Ç—Ä–∏–±—É—Ç id
```

> `//` = `descendant-or-self::node()/`
> `.` = `self::node()`
> `..` = `parent::node()`

---

## üß¨ –ü—Ä–µ–¥–∏–∫–∞—Ç—ã (—Ñ–∏–ª—å—Ç—Ä—ã)

### üîπ –û—Å–Ω–æ–≤—ã
```xpath
//div[true()]
//div[@class="head"]
//div[@class="head"][@id="top"]
```

### üîπ –ö–æ–º–±–∏–Ω–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π
```xpath
//ul[li]                         # ul, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω li
//ul[li[@class='hidden']]        # ul —Å li —Å –∫–ª–∞—Å—Å–æ–º hidden
//ul[count(li) > 2]              # ul, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ >2 li
```

---

## üõ† XPath —Ñ—É–Ω–∫—Ü–∏–∏

### üîπ –†–∞–±–æ—Ç–∞ —Å —É–∑–ª–∞–º–∏
```xpath
count(//*)                          # –ö–æ–ª-–≤–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
//ul[count(li) > 2]                 # ul —Å –±–æ–ª–µ–µ —á–µ–º –¥–≤—É–º—è li
//section[.//h1[@id='hi']]          # section —Å h1 —Å id=hi
```

### üîπ –§—É–Ω–∫—Ü–∏–∏ –ø–æ —Ç–∏–ø—É
```xpath
text()                     # –¢–µ–∫—Å—Ç —É–∑–ª–∞
name()                     # –ò–º—è —Ç–µ–≥–∞
position()                 # –ü–æ–∑–∏—Ü–∏—è —É–∑–ª–∞
last()                     # –ü–æ—Å–ª–µ–¥–Ω–∏–π —É–∑–µ–ª
```

### üîπ –õ–æ–≥–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
```xpath
not(expr)                  # –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏—è
```

### üîπ –°—Ç—Ä–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
```xpath
contains(str, substr)
starts-with(str, prefix)
ends-with(str, suffix)
normalize-space()
concat(a, b)
substring(str, start, len)
substring-before(str, delim)
substring-after(str, delim)
```

---

## üîó –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å

### üîπ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```xpath
//a | //span           # –í—Å–µ <a> –∏ <span>
```

### üîπ –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–∏–∫–∞—Ç—ã
```xpath
//section[.//h1[@id='section-name']]
```

---

## üß™ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å jQuery

| jQuery                         | XPath |
|-------------------------------|-------|
| $('ul > li').parent()         | `//ul/li/..` |
| $('li').closest('section')    | `//li/ancestor-or-self::section` |
| $('a').attr('href')           | `//a/@href` |
| $('span').text()              | `//span/text()` |
| $('div.class')                | `//div[contains(concat(' ', normalize-space(@class), ' '), ' class ')]` |

---

## üìä –ü—Ä–∏–º–µ—Ä—ã

```xpath
//*                                # –í—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã
(//h1)[1]/text()                  # –¢–µ–∫—Å—Ç –ø–µ—Ä–≤–æ–≥–æ h1
//li[span]                        # li, –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –µ—Å—Ç—å span
//ul/li/..                        # –†–æ–¥–∏—Ç–µ–ª—å ul —É li
//section[h1[@id='section-name']] # section, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π h1#section-name
```

```
