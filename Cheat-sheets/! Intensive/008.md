# Инструменты автоматизации тестирования

## JUnit и TestNG

### Определение и назначение
- **JUnit**: Это фреймворк для модульного тестирования в Java, который позволяет разработчикам писать и запускать повторяемые тесты. Он является стандартом де-факто для unit-тестирования в Java.
- **TestNG**: Это более современный фреймворк для тестирования, который был создан для преодоления ограничений JUnit. Он поддерживает более сложные сценарии тестирования, такие как интеграционное тестирование, функциональное тестирование и end-to-end тестирование.

### Основные различия между JUnit и TestNG

| Характеристика          | JUnit                          | TestNG                         |
|-------------------------|--------------------------------|--------------------------------|
| **Параллельный запуск** | Ограниченная поддержка (только через расширения) | Полноценная поддержка (на уровне методов, классов, тестов) |
| **Параметризация**      | Через `@ParameterizedTest` и `@ValueSource`, `@CsvSource` | Через `@DataProvider`, который позволяет гибко передавать данные |
| **Зависимости тестов**  | Нет встроенной поддержки       | Есть (через `dependsOnMethods` или `dependsOnGroups`) |
| **Группировка тестов**  | Нет встроенной поддержки       | Есть (через `groups`, что позволяет запускать тесты по группам) |
| **Конфигурация тестов** | Через аннотации (`@BeforeEach`, `@AfterEach`) | Более гибкая конфигурация (например, `@BeforeSuite`, `@AfterTest`) |
| **Отчеты**              | Базовые отчеты                | Более детализированные и настраиваемые отчеты |
| **Интеграция с CI/CD**  | Хорошая, но требует дополнительных плагинов | Лучшая, благодаря встроенной поддержке параллелизма и гибкости |

### Запуск и пропуск тестов

#### JUnit
- **Запуск теста**: Используется аннотация `@Test`. Метод, помеченный этой аннотацией, выполняется как тест.
- **Пропуск теста**: Используется аннотация `@Disabled`. Метод, помеченный этой аннотацией, не будет выполнен.

#### TestNG
- **Запуск теста**: Используется аннотация `@Test`. Метод, помеченный этой аннотацией, выполняется как тест.
- **Пропуск теста**: Используется атрибут `enabled = false` в аннотации `@Test`. Метод, помеченный таким образом, не будет выполнен.

### Параметризация тестов

#### JUnit
- **`@ParameterizedTest`**: Позволяет запускать тест с разными наборами данных.
- **`@ValueSource`**: Позволяет передавать примитивные значения (например, строки, числа).
- **`@CsvSource`**: Позволяет передавать данные в формате CSV.
- **`@MethodSource`**: Позволяет использовать метод для генерации данных.
- **`@EnumSource`**: Позволяет передавать значения из перечисления (enum).
- **`@NullSource` и `@EmptySource`**: Позволяют передавать `null` и пустые значения.

#### TestNG
- **`@DataProvider`**: Позволяет возвращать массив объектов для параметризации. Данные могут быть динамически сгенерированы или загружены из внешних источников.
- **Гибкость**: TestNG поддерживает более сложные сценарии, такие как передача объектов, коллекций и данных из внешних файлов.

### Параллельный запуск тестов

#### JUnit
- **Поддержка**: Ограниченная поддержка параллельного запуска. Требует использования расширений, таких как `junit-platform-engine`.
- **Уровни параллелизма**:
  - Методы: Параллельный запуск тестовых методов.
  - Классы: Параллельный запуск тестовых классов.
- **Настройка**: Конфигурация параллелизма выполняется через файл `junit-platform.properties`.

#### TestNG
- **Поддержка**: Полноценная поддержка параллельного запуска.
- **Уровни параллелизма**:
  - Методы: Параллельный запуск тестовых методов.
  - Классы: Параллельный запуск тестовых классов.
  - Тесты: Параллельный запуск тестовых блоков (теги `<test>` в `testng.xml`).
  - Наборы тестов (Suites): Параллельный запуск наборов тестов.
- **Настройка**: Конфигурация параллелизма выполняется через атрибут `parallel` в `testng.xml` или через аннотации.

### Общая таблица сравнения

| Характеристика          | JUnit                          | TestNG                         |
|-------------------------|--------------------------------|--------------------------------|
| **Запуск теста**        | Аннотация `@Test`              | Аннотация `@Test`              |
| **Пропуск теста**       | Аннотация `@Disabled`          | Атрибут `enabled = false` в `@Test` |
| **Параметризация**      | `@ParameterizedTest`, `@ValueSource`, `@CsvSource`, `@MethodSource` | `@DataProvider` |
| **Гибкость параметризации** | Подходит для простых сценариев | Подходит для сложных сценариев (динамические данные, внешние источники) |
| **Параллельный запуск** | Ограниченная поддержка (требует расширений) | Полноценная поддержка (на уровне методов, классов, тестов, наборов) |
| **Настройка параллелизма** | Через `junit-platform.properties` | Через `testng.xml` или аннотации |
| **Уровни параллелизма** | Методы, классы                 | Методы, классы, тесты, наборы тестов |
| **Интеграция с CI/CD**  | Хорошая, но требует дополнительных плагинов | Лучшая, благодаря встроенной поддержке параллелизма |
| **Поддержка сообщества** | Широкая, множество ресурсов   | Активно растущее сообщество    |

---

### Критерии выбора фреймворка
1. **Простота использования**: JUnit проще для начинающих и подходит для unit-тестирования.
2. **Гибкость**: TestNG предлагает больше возможностей для сложных сценариев, таких как интеграционное тестирование.
3. **Параллелизм**: Если требуется параллельный запуск тестов, TestNG предпочтительнее.
4. **Интеграция с инструментами**: JUnit лучше интегрирован с IDE (IntelliJ IDEA, Eclipse) и инструментами сборки (Maven, Gradle).
5. **Поддержка сообщества**: JUnit имеет более широкое сообщество и больше ресурсов для обучения.

### Хуки (Hooks)
Хуки — это методы, которые выполняются до или после тестов. Они используются для настройки и очистки данных.

#### JUnit:
- `@BeforeAll`: Выполняется один раз перед всеми тестами в классе.
- `@AfterAll`: Выполняется один раз после всех тестов в классе.
- `@BeforeEach`: Выполняется перед каждым тестом.
- `@AfterEach`: Выполняется после каждого теста.

#### TestNG:
- `@BeforeSuite`: Выполняется перед всеми тестами в наборе (suite).
- `@AfterSuite`: Выполняется после всех тестов в наборе.
- `@BeforeTest`: Выполняется перед всеми тестами в теговом блоке (тег `<test>` в `testng.xml`).
- `@AfterTest`: Выполняется после всех тестов в теговом блоке.
- `@BeforeClass`: Выполняется перед всеми тестами в классе.
- `@AfterClass`: Выполняется после всех тестов в классе.
- `@BeforeMethod`: Выполняется перед каждым тестовым методом.
- `@AfterMethod`: Выполняется после каждого тестового метода.

---

# Инструменты для управления проектом

### Java: Maven

#### Основные понятия
- **GroupID**: Уникальный идентификатор группы, к которой принадлежит проект (например, `com.example`).
- **ArtifactID**: Уникальный идентификатор артефакта (проекта) (например, `my-app`).
- **Version**: Версия артефакта (например, `1.0.0`).
- **Dependency**: Зависимость, которая необходима для сборки и выполнения проекта. Указывается в формате `GroupID:ArtifactID:Version`.

#### Жизненные циклы Maven
Maven использует концепцию жизненных циклов, которые состоят из фаз:
1. **clean**: Удаляет скомпилированные файлы и артефакты.
2. **validate**: Проверяет корректность проекта.
3. **compile**: Компилирует исходный код.
4. **test**: Запускает unit-тесты.
5. **package**: Упаковывает скомпилированный код в JAR, WAR или другой формат.
6. **verify**: Проверяет качество кода.
7. **install**: Устанавливает артефакт в локальный репозиторий.
8. **deploy**: Размещает артефакт в удаленном репозитории.
9. **site**: Генерирует документацию проекта.

#### Преимущества Maven
- Стандартизация структуры проекта.
- Автоматическое управление зависимостями.
- Широкая поддержка плагинов.

#### Консольные команды Maven

| Команда                          | Описание                                                                 |
|----------------------------------|-------------------------------------------------------------------------|
| `mvn clean`                      | Удаляет скомпилированные файлы и артефакты (папка `target`).            |
| `mvn validate`                   | Проверяет корректность проекта (например, структуру и настройки).       |
| `mvn compile`                    | Компилирует исходный код проекта.                                       |
| `mvn test`                       | Запускает unit-тесты.                                                   |
| `mvn package`                    | Упаковывает проект в JAR, WAR или другой формат.                        |
| `mvn verify`                     | Проверяет качество кода (например, с использованием плагинов).          |
| `mvn install`                    | Устанавливает артефакт в локальный репозиторий (папка `.m2`).           |
| `mvn deploy`                     | Размещает артефакт в удаленном репозитории (например, Nexus или Artifactory). |
| `mvn site`                       | Генерирует документацию проекта.                                        |
| `mvn clean install`              | Очищает проект и выполняет сборку с установкой в локальный репозиторий. |
| `mvn clean package`              | Очищает проект и упаковывает его в JAR/WAR.                             |
| `mvn dependency:tree`            | Отображает дерево зависимостей проекта.                                 |
| `mvn dependency:resolve`         | Разрешает и загружает все зависимости проекта.                          |
| `mvn dependency:copy-dependencies` | Копирует все зависимости в указанную директорию.                       |
| `mvn help:effective-pom`         | Показывает итоговый POM-файл с учетом всех наследований и профилей.     |
| `mvn archetype:generate`         | Создает новый проект на основе шаблона (archetype).                     |
| `mvn versions:set -DnewVersion=1.1.0` | Изменяет версию проекта на указанную.                                |
| `mvn clean test`                 | Очищает проект и запускает тесты.                                       |
| `mvn clean compile`              | Очищает проект и компилирует исходный код.                              |
| `mvn clean verify`               | Очищает проект и проверяет качество кода.                               |
| `mvn clean deploy`               | Очищает проект и развертывает артефакт в удаленном репозитории.         |
| `mvn clean site`                 | Очищает проект и генерирует документацию.                               |

---

### Java: Gradle

#### Основные понятия
- **Task**: Задача, которая может быть выполнена (например, компиляция, тестирование).
- **Build Script**: Скрипт на Groovy или Kotlin, который определяет, как проект должен быть собран. Основной файл — `build.gradle`.
- **Dependency Management**: Управление зависимостями через `build.gradle`. Зависимости указываются в блоке `dependencies`.

#### Преимущества Gradle
- Гибкость и расширяемость.
- Поддержка инкрементальных сборок (ускоряет процесс).
- Интеграция с Maven и Ivy.
- Использование DSL (Domain-Specific Language) для настройки сборки.
- Поддержка многопроектных сборок.
- Кэширование задач для ускорения повторных сборок.

#### Консольные команды Gradle

| Команда                          | Описание                                                                 |
|----------------------------------|-------------------------------------------------------------------------|
| `gradle tasks`                   | Показывает список всех доступных задач в проекте.                       |
| `gradle build`                   | Выполняет полную сборку проекта (компиляция, тестирование, упаковка).   |
| `gradle clean`                   | Очищает проект (удаляет папку `build`).                                 |
| `gradle compileJava`             | Компилирует исходный код Java.                                          |
| `gradle compileTestJava`         | Компилирует тестовый код Java.                                          |
| `gradle test`                    | Запускает unit-тесты.                                                   |
| `gradle check`                   | Запускает проверки, включая тесты и статический анализ кода.            |
| `gradle jar`                     | Создает JAR-файл из скомпилированных классов.                           |
| `gradle war`                     | Создает WAR-файл для веб-приложений.                                    |
| `gradle assemble`                | Собирает все артефакты (JAR, WAR и т.д.) без запуска тестов.            |
| `gradle install`                 | Устанавливает артефакт в локальный репозиторий (аналог `mvn install`).  |
| `gradle publish`                 | Публикует артефакт в удаленный репозиторий.                             |
| `gradle dependencies`            | Отображает дерево зависимостей проекта.                                 |
| `gradle dependencyInsight`       | Показывает подробную информацию о конкретной зависимости.               |
| `gradle clean build`             | Очищает проект и выполняет полную сборку.                               |
| `gradle clean test`              | Очищает проект и запускает тесты.                                       |
| `gradle clean assemble`          | Очищает проект и собирает артефакты без тестов.                         |
| `gradle properties`              | Показывает все свойства проекта.                                        |
| `gradle help`                    | Показывает справку по командам Gradle.                                  |
| `gradle wrapper`                 | Генерирует или обновляет Gradle Wrapper (файлы `gradlew`, `gradlew.bat`). |
| `gradle projects`                | Показывает список подпроектов в многопроектной сборке.                  |
| `gradle tasks --all`             | Показывает все задачи, включая скрытые и задачи подпроектов.            |
| `gradle build --scan`            | Создает детальный отчет о сборке и публикует его на Gradle Enterprise.  |
| `gradle run`                     | Запускает основное приложение (если настроено в `build.gradle`).        |
| `gradle bootRun`                 | Запускает Spring Boot приложение (если используется Spring Boot).       |
| `gradle clean build --refresh-dependencies` | Очищает проект, обновляет зависимости и выполняет сборку.         |

---

### Сравнение Maven и Gradle

| Характеристика          | Maven                          | Gradle                         |
|-------------------------|--------------------------------|--------------------------------|
| **Конфигурация**        | XML-файл (`pom.xml`). XML-синтаксис строгий и структурированный, но менее гибкий. | Groovy/Kotlin DSL (`build.gradle`). Позволяет писать логику и кастомные задачи, что делает конфигурацию более гибкой. |
| **Производительность**  | Медленнее, так как Maven выполняет полную пересборку каждый раз. | Быстрее благодаря инкрементальным сборкам. Gradle кэширует результаты задач и пересобирает только измененные части. |
| **Гибкость**            | Ограниченная. Maven использует предопределенные жизненные циклы и фазы, что делает его менее гибким для нестандартных задач. | Высокая. Gradle позволяет создавать кастомные задачи, расширять функциональность через плагины и писать сложную логику сборки. |
| **Поддержка плагинов**  | Широкая. Maven имеет огромное количество плагинов для различных задач (компиляция, тестирование, упаковка и т.д.). | Широкая. Gradle поддерживает плагины как из собственного репозитория, так и из Maven. Также Gradle позволяет писать собственные плагины на Groovy или Kotlin. |
| **Сложность обучения**  | Проще для новичков. XML-синтаксис понятен и требует минимальных знаний для начала работы. | Требует знания Groovy/Kotlin. Для сложных сценариев необходимо понимание DSL и основ программирования. |
| **Управление зависимостями** | Использует централизованный репозиторий (Maven Central). Зависимости указываются в `pom.xml`. | Поддерживает Maven Central, Ivy и другие репозитории. Зависимости указываются в `build.gradle`. Gradle также поддерживает динамические версии и гибкое управление конфликтами версий. |
| **Многопроектные сборки** | Поддерживает многопроектные сборки, но конфигурация может быть сложной и ограниченной. | Отлично поддерживает многопроектные сборки. Gradle позволяет легко настраивать зависимости между подпроектами и управлять их сборкой. |
| **Кэширование**         | Ограниченное кэширование. Maven не кэширует результаты задач, что может замедлять сборку. | Расширенное кэширование. Gradle кэширует результаты задач, что ускоряет повторные сборки. |
| **Интеграция с CI/CD**  | Хорошая. Maven легко интегрируется с инструментами CI/CD, такими как Jenkins, GitLab CI и другими. | Отличная. Gradle предоставляет более гибкие возможности для интеграции с CI/CD, включая поддержку инкрементальных сборок и кэширования. |
| **Поддержка языков**    | В основном ориентирован на Java. Поддержка других языков ограничена. | Поддерживает множество языков, включая Java, Kotlin, Groovy, Scala, C++ и другие. |
| **Wrappers**            | Нет встроенной поддержки Wrappers. | Gradle Wrapper (`gradlew`) позволяет использовать определенную версию Gradle без необходимости установки его на машину. Это упрощает работу в команде и CI/CD. |
| **Сообщество и поддержка** | Огромное сообщество и множество ресурсов. Maven используется в большинстве Java-проектов. | Активно растущее сообщество. Gradle становится стандартом для современных проектов, особенно с использованием Kotlin. |
| **Документация**        | Хорошо документирован. Официальная документация и множество руководств доступны. | Отличная документация. Gradle предоставляет подробные руководства и примеры для различных сценариев. |
| **Поддержка IDE**       | Отличная поддержка в IntelliJ IDEA, Eclipse и других IDE. | Отличная поддержка в IntelliJ IDEA, Eclipse и других IDE. Gradle также поддерживает Kotlin DSL, что делает его удобным для разработчиков на Kotlin. |
| **Скорость разработки** | Медленнее из-за ограниченной гибкости и необходимости полной пересборки. | Быстрее благодаря инкрементальным сборкам, кэшированию и гибкости конфигурации. |

---
